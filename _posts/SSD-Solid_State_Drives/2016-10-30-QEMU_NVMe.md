---
layout: post
title: QEMU-NVMe
subtitle: What is the QEMU-NVMe ? 
css:
tags:
date:
big-image:
share-image:
permalink:
comments:
show-share:
big-image:
meta-title:
meta-description:
---

# QEMU-NVMe

 I need to know this tool, Because I have to evaluate the openChannelSSD. 
 
 Openchannel's lightnvm guys make lightNVM work on virtual NVMe. 
 
 For example, let's see [kernel 4.9 source code.](http://lxr.free-electrons.com/source/drivers/nvme/host/lightnvm.c#L633)

```
628 /* move to shared place when used in multiple places. */
629 #define PCI_VENDOR_ID_CNEX 0x1d1d
630 #define PCI_DEVICE_ID_CNEX_WL 0x2807
631 #define PCI_DEVICE_ID_CNEX_QEMU 0x1f1f
632 
633 int nvme_nvm_ns_supported(struct nvme_ns *ns, struct nvme_id_ns *id)
634 {
635         struct nvme_ctrl *ctrl = ns->ctrl;
636         /* XXX: this is poking into PCI structures from generic code! */
637         struct pci_dev *pdev = to_pci_dev(ctrl->dev);
638 
639         /* QEMU NVMe simulator - PCI ID + Vendor specific bit */
640         if (pdev->vendor == PCI_VENDOR_ID_CNEX &&
641                                 pdev->device == PCI_DEVICE_ID_CNEX_QEMU &&
642                                                         id->vs[0] == 0x1)
643                 return 1;
644 
645         /* CNEX Labs - PCI ID + Vendor specific bit */
646         if (pdev->vendor == PCI_VENDOR_ID_CNEX &&
647                                 pdev->device == PCI_DEVICE_ID_CNEX_WL &&
648                                                         id->vs[0] == 0x1)
649                 return 1;
650 
651         return 0;
652 }
653 
```

 As you can see the above code, PCI_DEVICE_ID_CNEX_QEMU prove you can use lightNVM with virtual OpenchannelSSD on QEMU-NVMe. i.e QEMU helps make virtual NVMe to fit openchannelSSD. You can evaluate many things. 
 
 First of all, I will arrange how to install The original QEMU-NVMe.
 
 Because for the dedicated QEMU-NVMe of OpenChannel. the basic installation is the same.
 
 For your infromation, in wikipedia's NVM Express, they are saying **NVMe is supported by QEMU since version 1.6 released on August 15, 2013**
 
 Also You can check [changelog](http://wiki.qemu.org/ChangeLog/1.6) of official QEMU site
 
 But In my case, I will not run NVMe with QEMU, i will Just use [opensource QEMU-NVMe.](https://github.com/nvmeqemu/nvmeqemu)
 
 In my case, I want to know how to install and what the neccesity is to install QEMU-NVMe On CentOS 7. 
 
 Here is [Git repository of QEMU-NVMe.](https://github.com/nvmeqemu/nvmeqemu) 

# How to install QEMU-NVMe



 












# Reference

  - [Wikipedia's NVM_Express](https://en.wikipedia.org/wiki/NVM_Express)

  - [QEMU's changeLog 1.6](http://wiki.qemu.org/ChangeLog/1.6)
  
  - [QEMU-NVME git repository](https://github.com/nvmeqemu/nvmeqemu)





# After knowing the above tool, I tried to install qemu to work on Lightnvm

 I think that [lightnvm.io](http://lightnvm.io/) is official site. In this site. You can get hint about lightnvm. 
 
 From now on, It is important to konw preparation for lihgtnvm. 
 
 First of all, How to install lightnvm is important. **BUT** If you have a specitif device for test lihgtnvm. 
 
 when you test lightnvm, It is difficult.
 
 So, We will have to utilize the QEMU, virtualiztion. 
 
 for brief informaion, There is [User Documentation's geting started](http://openchannelssd.readthedocs.io/en/latest/gettingstarted/) of [lihgtnvm.io](http://lightnvm.io/)

 AS you can see the contents of [lightnvm.io] and [User Documentation's geting started](http://openchannelssd.readthedocs.io/en/latest/gettingstarted/).
 
 In order to start testing lihgtnvm. you need to install [the QEMU](http://wiki.qemu.org/Main_Page) for vitualization. 
 
 So From now on I will implement procedure of installation of The QEMU on Centos 7. 
 
--------------------------------------------------------------------------------------------------------------------
 
 [geting started's Intantiate with NNMe using QEMU](http://openchannelssd.readthedocs.io/en/latest/gettingstarted/#instantiate-with-nvme-using-qemu)
